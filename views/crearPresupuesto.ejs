<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind debe ir primero -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="icon" href="img/Logo.ico" type="image/x-icon">
  <link rel="stylesheet" href="dist/output.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

  <title>Crear Presupuesto</title>

  <style>
    body {
      font-family: 'Bebas Neue', sans-serif;
    }

    .formulario-principal {
      display: block;
    }

    .formulario-recordatorio {
      display: none;
    }
  </style>
</head>
<body class="pt-20 flex justify-center items-center min-h-screen bg-gray-100 relative">
  <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover -z-10">
    <source src="video/videoFondo.mp4" type="video/mp4">
  </video>

  <!-- NAVBAR MODERNA -->
<nav class="bg-black/80 backdrop-blur-md text-white p-4 shadow-lg w-full fixed top-0 left-0 z-50">
  <div class="w-full flex justify-between items-center px-4">
    <!-- Título alineado completamente a la izquierda -->
    <div class="text-2xl font-bold">Mi Presupuesto</div>

    <!-- Botón de menú alineado completamente a la derecha -->
    <div class="relative">
      <button id="menu-btn" class="focus:outline-none">
        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>

      <!-- Menú desplegable -->
      <div id="mobile-menu" class="hidden absolute right-0 mt-2 w-40 bg-white text-black rounded-lg shadow-lg py-2 z-50">
		<a href="/principal" class="block px-4 py-2 hover:bg-yellow-100 transition">Página Principal</a>
        <a href="/cuenta" class="block px-4 py-2 hover:bg-yellow-100 transition">Perfil</a>
        <a href="/logout" class="block px-4 py-2 hover:bg-yellow-100 transition">Cerrar sesión</a>
      </div>
    </div>
  </div>
</nav>


  <!-- FORMULARIO -->
  <div class="bg-gray-200 p-6 rounded-xl shadow-md max-w-md w-full mx-4 z-10">
    <h2 class="text-2xl text-center font-bold text-gray-800 mb-4">Crear Presupuesto</h2>

    <form action="/crearPresupuesto" method="POST" id="formularioPresupuesto" class="formulario-principal">
      <label for="nombre" class="block text-sm font-semibold mb-1">Nombre del presupuesto</label>
      <input type="text" id="nombre" name="nombre" placeholder="Ej: Viaje a Cartagena" class="w-full mb-4 p-2 border border-gray-300 rounded-md" required>

      <label for="valor" class="block text-sm font-semibold mb-1">Valor estimado ($)</label>
      <input type="number" step="0.01" min="0" id="valor" name="valor" placeholder="Ej: 1500.00" class="w-full mb-4 p-2 border border-gray-300 rounded-md" required>
	  
	  <!-- Selección de categoría -->
	<div class="mb-4">
	  <label for="categoria" class="block text-sm font-semibold mb-1">Categoría</label>
	  <select id="categoria" name="categoria" class="w-full p-2 border border-gray-300 rounded-md" onchange="mostrarInputCategoria()">
		<option value="Casa">Casa</option>
		<option value="Comida">Comida</option>
		<option value="Trabajo">Trabajo</option>
		<option value="Otros">Otros</option>
	  </select>
	</div>

	<!-- Input para categoría personalizada -->
	<div id="otraCategoriaDiv" class="mb-4 hidden">
	  <label for="otraCategoria" class="block text-sm font-semibold mb-1">Otra categoría</label>
	  <input type="text" id="otraCategoria" name="otraCategoria" placeholder="Especifica otra categoría" class="w-full p-2 border border-gray-300 rounded-md" />
	</div>

	  
      <div class="flex gap-4">
        <div class="w-1/2">
          <label for="fecha_inicio" class="block text-sm font-semibold mb-1">Fecha inicio</label>
          <input type="date" id="fecha_inicio" name="fecha_inicio" class="w-full p-2 border border-gray-300 rounded-md" required>
        </div>
        <div class="w-1/2">
          <label for="fecha_fin" class="block text-sm font-semibold mb-1">Fecha fin</label>
          <input type="date" id="fecha_fin" name="fecha_fin" class="w-full p-2 border border-gray-300 rounded-md" required>
        </div>
      </div>

      <div class="flex justify-between gap-4 mt-6">
        <button type="submit" class="bg-black text-white text-center py-2 rounded-full w-full hover:bg-yellow-600 transition">
          Crear
        </button>
        <button type="button" class="bg-fuchsia-800 text-white py-2 rounded-full w-full hover:bg-yellow-600 transition" onclick="mostrarFormularioRecordatorio()">
          Crear y Recordar
        </button>
      </div>
	  <!-- Botón Cancelar -->
	<button type="button" onclick="window.location.href='/principal'" 
	  class="mt-4 bg-red-600 text-white py-2 rounded-full w-full hover:bg-red-800 transition">
	  Cancelar
	</button>

    </form>

    <div id="formularioRecordatorio" class="formulario-recordatorio mt-6">
      <p class="text-center text-sm text-gray-700 mb-4">Recordatorio activado. (Aquí podrías añadir campos adicionales si lo deseas)</p>

      <a href="/presupuesto/:id" class="block bg-black text-white text-center py-2 rounded-full w-full hover:bg-yellow-600 transition mt-2">
        Finalizar
      </a>
      <button type="button" onclick="cancelarFormularioRecordatorio()" class="mt-2 bg-red-600 text-white py-2 rounded-full w-full hover:bg-red-800 transition">
        Cancelar
      </button>
    </div>
  </div>

  <script>
  function mostrarFormularioRecordatorio() {
    document.getElementById('formularioPresupuesto').style.display = 'none';
    document.getElementById('formularioRecordatorio').style.display = 'block';
  }

  function cancelarFormularioRecordatorio() {
    document.getElementById('formularioRecordatorio').style.display = 'none';
    document.getElementById('formularioPresupuesto').style.display = 'block';
  }

  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  menuBtn.addEventListener('click', (e) => {
    e.stopPropagation(); // Evita que se dispare el cierre inmediato
    mobileMenu.classList.toggle('hidden');
  });

  // Cierra el menú si se hace clic fuera de él
  document.addEventListener('click', (e) => {
    const isClickInsideMenu = mobileMenu.contains(e.target);
    const isClickOnButton = menuBtn.contains(e.target);
    if (!isClickInsideMenu && !isClickOnButton) {
      mobileMenu.classList.add('hidden');
    }
  });
  
  function mostrarInputCategoria() {
    const select = document.getElementById('categoria');
    const otraCategoriaDiv = document.getElementById('otraCategoriaDiv');

    if (select.value === 'Otros') {
      otraCategoriaDiv.classList.remove('hidden');
    } else {
      otraCategoriaDiv.classList.add('hidden');
      document.getElementById('otraCategoria').value = ''; // Limpiar campo si no es 'Otros'
    }
  }
  
</script>

</body>
</html>
